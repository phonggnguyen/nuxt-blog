'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

const schemaOrg = require('@vueuse/schema-org');
const head = require('@vueuse/head');
const vue = require('vue');

function installSchemaOrg(ctx, config) {
  const resolvedConfig = schemaOrg.resolveUserConfig(config);
  let head$1 = ctx.app._context.provides.usehead;
  if (!head$1) {
    head$1 = head.createHead();
    ctx.app.use(head$1);
  }
  const client = schemaOrg.createSchemaOrg({
    meta() {
      return {
        path: ctx.router.route.path,
        ...ctx.siteData.value,
        ...ctx.router.route.data,
        ...ctx.router.route.data.frontmatter,
        ...resolvedConfig.meta
      };
    },
    updateHead(fn) {
      head$1.addHeadObjs(fn);
      if (typeof document !== "undefined")
        head$1.updateDOM();
    }
  });
  vue.watch(() => ctx.router.route.data.relativePath, () => {
    client.generateSchema();
  });
  ctx.app.use(client);
  client.setupDOM();
  return client;
}

exports.installSchemaOrg = installSchemaOrg;
