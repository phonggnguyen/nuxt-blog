{"version":3,"file":"MarkdownRenderer.5d536282.js","sources":["../../../../node_modules/.pnpm/@nuxt+content@2.0.1/node_modules/@nuxt/content/dist/runtime/components/MarkdownRenderer.mjs"],"sourcesContent":["import { h, resolveComponent, Text, defineComponent, toRefs } from \"vue\";\nimport destr from \"destr\";\nimport { pascalCase } from \"scule\";\nimport { find, html } from \"property-information\";\nimport htmlTags from \"html-tags\";\nimport { useRuntimeConfig } from \"#app\";\nconst DEFAULT_SLOT = \"default\";\nconst rxOn = /^@|^v-on:/;\nconst rxBind = /^:|^v-bind:/;\nconst rxModel = /^v-model/;\nconst nativeInputs = [\"select\", \"textarea\", \"input\"];\nexport default defineComponent({\n  name: \"ContentRendererMarkdown\",\n  props: {\n    value: {\n      type: Object,\n      required: true\n    },\n    excerpt: {\n      type: Boolean,\n      default: false\n    },\n    tag: {\n      type: String,\n      default: \"div\"\n    }\n  },\n  setup(props) {\n    const { content: { tags = {} } } = useRuntimeConfig().public;\n    const { tag: _t, value: _d, ...contentProps } = toRefs(props);\n    return {\n      tags,\n      contentProps\n    };\n  },\n  render(ctx) {\n    const { tags, tag, value, contentProps } = ctx;\n    if (!value) {\n      return null;\n    }\n    let body = value.body || value;\n    if (this.excerpt && value.excerpt) {\n      body = value.excerpt;\n    }\n    const meta = {\n      ...value,\n      tags: {\n        ...tags,\n        ...value?.tags || {}\n      }\n    };\n    let component = meta.component || tag;\n    if (typeof meta.component === \"object\") {\n      component = meta.component.name;\n    }\n    component = resolveVueComponent(component);\n    const children = (body.children || []).map((child) => renderNode(child, h, meta));\n    return h(component, {\n      ...contentProps,\n      ...meta.component?.props,\n      ...this.$attrs\n    }, {\n      default: createSlotFunction(children)\n    });\n  }\n});\nfunction renderNode(node, h2, documentMeta) {\n  const originalTag = node.tag;\n  const renderTag = typeof node.props?.__ignoreMap === \"undefined\" && documentMeta.tags[node.tag] || node.tag;\n  if (node.type === \"text\") {\n    return h2(Text, node.value);\n  }\n  const component = resolveVueComponent(renderTag);\n  if (typeof component === \"object\") {\n    component.tag = originalTag;\n  }\n  return h2(component, propsToData(node, documentMeta), renderSlots(node, h2, documentMeta));\n}\nfunction renderSlots(node, h2, documentMeta) {\n  const children = node.children || [];\n  const slots = children.reduce((data, node2) => {\n    if (!isTemplate(node2)) {\n      data[DEFAULT_SLOT].push(renderNode(node2, h2, documentMeta));\n      return data;\n    }\n    if (isDefaultTemplate(node2)) {\n      data[DEFAULT_SLOT].push(...node2.children.map((child) => renderNode(child, h2, documentMeta)));\n      return data;\n    }\n    const slotName = getSlotName(node2);\n    data[slotName] = node2.children.map((child) => renderNode(child, h2, documentMeta));\n    return data;\n  }, {\n    [DEFAULT_SLOT]: []\n  });\n  return Object.fromEntries(Object.entries(slots).map(([name, vDom]) => [name, createSlotFunction(vDom)]));\n}\nfunction propsToData(node, documentMeta) {\n  const { tag = \"\", props = {} } = node;\n  return Object.keys(props).reduce(function(data, key) {\n    if (key === \"__ignoreMap\") {\n      return data;\n    }\n    const value = props[key];\n    if (rxModel.test(key) && !nativeInputs.includes(tag)) {\n      return propsToDataRxModel(key, value, data, documentMeta);\n    }\n    if (key === \"v-bind\") {\n      return propsToDataVBind(key, value, data, documentMeta);\n    }\n    if (rxOn.test(key)) {\n      return propsToDataRxOn(key, value, data, documentMeta);\n    }\n    if (rxBind.test(key)) {\n      return propsToDataRxBind(key, value, data, documentMeta);\n    }\n    const { attribute } = find(html, key);\n    if (Array.isArray(value) && value.every((v) => typeof v === \"string\")) {\n      data[attribute] = value.join(\" \");\n      return data;\n    }\n    data[attribute] = value;\n    return data;\n  }, {});\n}\nfunction propsToDataRxModel(key, value, data, documentMeta) {\n  const number = (d) => +d;\n  const trim = (d) => d.trim();\n  const noop = (d) => d;\n  const mods = key.replace(rxModel, \"\").split(\".\").filter((d) => d).reduce((d, k) => {\n    d[k] = true;\n    return d;\n  }, {});\n  const field = \"value\";\n  const event = mods.lazy ? \"change\" : \"input\";\n  const processor = mods.number ? number : mods.trim ? trim : noop;\n  data[field] = evalInContext(value, documentMeta);\n  data.on = data.on || {};\n  data.on[event] = (e) => documentMeta[value] = processor(e);\n  return data;\n}\nfunction propsToDataVBind(_key, value, data, documentMeta) {\n  const val = evalInContext(value, documentMeta);\n  data = Object.assign(data, val);\n  return data;\n}\nfunction propsToDataRxOn(key, value, data, documentMeta) {\n  key = key.replace(rxOn, \"\");\n  data.on = data.on || {};\n  data.on[key] = () => evalInContext(value, documentMeta);\n  return data;\n}\nfunction propsToDataRxBind(key, value, data, documentMeta) {\n  key = key.replace(rxBind, \"\");\n  data[key] = evalInContext(value, documentMeta);\n  return data;\n}\nconst resolveVueComponent = (component) => {\n  if (!htmlTags.includes(component)) {\n    const componentFn = resolveComponent(pascalCase(component), false);\n    if (typeof componentFn === \"object\") {\n      return componentFn;\n    }\n  }\n  return component;\n};\nfunction evalInContext(code, context) {\n  const result = code.split(\".\").reduce((o, k) => typeof o === \"object\" ? o[k] : void 0, context);\n  return typeof result === \"undefined\" ? destr(code) : result;\n}\nfunction getSlotName(node) {\n  let name = \"\";\n  for (const propName of Object.keys(node.props || {})) {\n    if (!propName.startsWith(\"#\") && !propName.startsWith(\"v-slot:\")) {\n      continue;\n    }\n    name = propName.split(/[:#]/, 2)[1];\n    break;\n  }\n  return name || DEFAULT_SLOT;\n}\nfunction createSlotFunction(nodes) {\n  return nodes.length ? () => nodes : void 0;\n}\nfunction isDefaultTemplate(node) {\n  return isTemplate(node) && getSlotName(node) === DEFAULT_SLOT;\n}\nfunction isTemplate(node) {\n  return node.tag === \"template\";\n}\n"],"names":[],"mappings":"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"}